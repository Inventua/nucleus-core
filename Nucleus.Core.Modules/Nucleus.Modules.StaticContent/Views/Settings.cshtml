@model Nucleus.Modules.StaticContent.ViewModels.Settings
@addTagHelper "*, Nucleus.ViewFeatures"
@using Nucleus.ViewFeatures.HtmlHelpers
@using Nucleus.ViewFeatures
@using Nucleus.Modules.StaticContent.ViewModels
@Html.AddStyle("~!/../settings.css")
<div>
	@using (Html.BeginNucleusForm("Settings", "StaticContentAdmin", FormMethod.Post, new { @enctype = "multipart/form-data" }))
	{
	<fieldset role="group" aria-labelledby="heading">
		<h2>Settings</h2>

		<SettingsControl caption="Documents Folder" helptext="Select the folder containing your static files.">
			<div class="nucleus-flex-fields nucleus-fileselector">
				@await Component.InvokeAsync(typeof(Nucleus.ViewFeatures.Controls.FolderSelector), new { model = Model.SourceFolder, PropertyName = nameof(Settings.SourceFolder) })
			</div>
		</SettingsControl>

		@if (Model.SourceFolder?.Files != null && Model.SourceFolder.Files.Any())
		{
			<SettingsControl caption="Default File" helptext="Select the default file to display.">
				@Html.DropDownListFor(model => model.DefaultFile.Id, new SelectList(Model.SourceFolder?.Files, "Id", "Name"))
			</SettingsControl>
		}

		<div class="Tools">
			@Html.SubmitButton("", "Save Settings", @Url.NucleusAction("SaveSettings", "StaticContentAdmin", "StaticContent"), new { })

		</div>
	</fieldset>
	}
</div>
