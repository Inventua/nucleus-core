/*! nucleus-editmode | Nucleus inline editing client-side handlers and behaviours | (c) Inventua Pty Ptd.  www.nucleus-cms.com */
function _setupEditMode(){function t(t){var i=jQuery(t.target);i.addClass("dragging");jQuery(".nucleus-move-droptarget").each(function(n,r){var u=jQuery(r),e=i.parents(".nucleus-module-editing"),f=u.parents(".nucleus-module-editing");f.is(jQuery(t.target).parents(".nucleus-module-editing"))||f.length===0&&u.parent().is(e.parent())&&u.is(":last-child")||u.addClass("show")});t.originalEvent.dataTransfer.effectAllowed="move";n=jQuery(t.target).attr("data-mid")}function i(t){var i=jQuery(t.target).attr("data-mid");n!==null&&n!==i?(jQuery(t.target).addClass("drag-active"),t.originalEvent.dataTransfer.dropEffect="move"):t.originalEvent.dataTransfer.dropEffect="none"}function r(t){var i=jQuery(t.target).attr("data-mid");n!==null&&n!==i&&t.preventDefault()}function u(n){jQuery(n.target).removeClass("drag-active")}function f(t){jQuery(t.target).removeClass("dragging");jQuery(".nucleus-move-droptarget").removeClass("show");n=null}function e(t){var r=jQuery(t.target).attr("data-pane-name"),u=jQuery(t.target).attr("data-mid"),f,i;r!==null&&n!==null&&(f=document.baseURI+"admin/pages/movemoduleto?mid="+n,i=new FormData,i.append("pane",r),typeof u!="undefined"&&i.append("beforeModuleId",u),jQuery.ajax({url:f,"async":!0,method:"POST",enctype:"multipart/form-data",data:i,headers:{Accept:"application/json, */*"},contentType:!1,processData:!1,success:function(){window.location.reload(!0)},error:function(){}}))}function o(){var t=jQuery(this).attr("data-inline-edit-route"),n=new FormData;n.append("value",jQuery(this).html());jQuery.ajax({url:t,"async":!0,method:"POST",enctype:"multipart/form-data",data:n,headers:{Accept:"application/json, */*"},contentType:!1,processData:!1,success:function(){},error:function(){}})}var n=null;jQuery(".nucleus-module-editing *[data-inline-edit-route]").prop("contenteditable","true").on("blur",o);jQuery(".nucleus-move-dragsource").on("dragstart",t).on("dragend",f);jQuery(".nucleus-move-droptarget").on("dragenter",i).on("dragover",r).on("dragleave",u).on("drop",e);jQuery(".nucleus-move-droptarget").each(function(n,t){var i=jQuery(t);(i.parent().prev().length!==0&&i.parent().prev().position().top===i.parent().position().top||i.parent().next().length!==0&&i.parent().next().position().top===i.parent().position().top||i.prev().length!==0&&i.prev().position().top===i.position().top||i.next().length!==0&&i.next().position().top===i.position().top)&&i.addClass("sideways")})}jQuery(Page).on("ready.admin",_setupEditMode);