tinymce.util.Tools.resolve("tinymce.PluginManager").add("images",function(n){var t=function(n){var i=document.baseURI+"User/FileSelector/Index?pattern=(.gif)|(.png)|(.jpg)|(.jpeg)|(.bmp)|(.webp)&showSelectAnother=false&applicationAbsoluteUrl=false&noFilesMessage=(no image files)&showImagePreview=true",t;jQuery.ajax({url:i,"async":!0,method:"GET",success:function(t){jQuery(n).html(t)}});t=jQuery(".nucleus-fileselectorform");t.attr("data-target",n);t.attr("action",i);t.attr("method","POST")},i=function(){n.windowManager.open({title:"Insert Image",size:"medium",body:{type:"panel",items:[{type:"htmlpanel",html:'<form class="nucleus-fileselectorform"><div class="nucleus-flex-fields nucleus-fileselector"><\/div><\/form>'},{type:"input",name:"caption",inputMode:"text",label:"Caption",placeholder:"enter a caption for your image",maximized:!1}]},buttons:[{type:"submit",name:"save",text:"Insert Image",primary:!0},{type:"cancel",name:"cancel",text:"Cancel"}],initialData:{},onSubmit:function(t){var u=jQuery(".file-link").html(),i='<img alt="'+t.getData().caption+'" src="'+u+'"/>',r="";r=t.getData().caption!==""?"<div><figure>"+i+"<figcaption>"+t.getData().caption+"<\/figcaption><\/figure><\/div>":"<div>"+i+"<\/div>";n.insertContent(r);t.close()}});t(".nucleus-fileselector")};return n.ui.registry.addButton("images",{tooltip:"Insert Image",icon:"image",onAction:function(){i()}}),{getMetadata:function(){return{name:"Insert Image"}}}});