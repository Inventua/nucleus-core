(function(){jQuery.fn.PageLinkViewer=function(n){function u(n,r,u){let e=n.find(":header:visible"),o=jQuery("<div><\/div>");if(e.length>0){let s=-1,n=[];for(let h=0;h<e.length;h++){let c=e[h],l=parseInt(c.nodeName.substring(1),10);if(l!==s){if(n.length!==0){let i=t(e,o,jQuery(e[h-1]),r,u);i.append(i.is("li")?jQuery("<ol><\/ol>").append(n):n);n=[]}s=l}if(i(c,r,u)){let t=f(jQuery(c));n.push(t)}if(h===e.length-1){let i=t(e,o,jQuery(c),r,u);i.append(i.is("li")?jQuery("<ol><\/ol>").append(n):n)}}}return o.children()}function f(n){let u=n.prop("id"),f=new URL(window.location.href);f.hash="#"+u;let i=jQuery(n).prop("data-title");typeof i=="undefined"&&(i=jQuery(n).text());let e=jQuery("<li><\/li>"),t=jQuery('<a href="#">'+i+"<\/a>");if(u===""){t[0].PageLinksTarget=n;t.on("click",r)}else{t.attr("href",f.toString());t.on("click",r)}return e.append(t),e}function t(n,t,r,u,f){if(n[0]===r[0])return t;else{let e=parseInt(r[0].nodeName.substring(1),10);for(let o=n.index(r);o>=0;o--){let r=n[o],s=parseInt(r.nodeName.substring(1),10);if(i(r,u,f)&&s<e){let n=null,i=new URL(window.location.href);if(i.hash="#"+jQuery(r).prop("id"),n=jQuery(t).find('a[href*="'+i.toString()+'"]').parent(),n.length!==0)return n;if(n===null||n.length===0){let n=jQuery(t).find("a");for(let t=n.length-1;t>=0;t--)if(typeof n[t].PageLinksTarget!="undefined"&&n[t].PageLinksTarget.length>0&&n[t].PageLinksTarget[0]===r)return jQuery(n[t]).parent()}}}}return t}function i(n,t,i){let r=t.toUpperCase().split(",").includes(n.nodeName);if(r){if(i==="")return!0;let t=i.split(",");for(let i=0;i<t.length;i++)if(jQuery(n).hasClass(t[i].trim().replace(/^\./gm,"")))return!0}return!1}function r(n){let t=this.PageLinksTarget;if(typeof t=="undefined"||t===null){let n=new URL(jQuery(this).attr("href"));t=jQuery(n.hash)}else n.preventDefault();let r=getComputedStyle(t[0]).getPropertyValue("--page-links-highlight-duration"),i=Number.isNaN(parseInt(r))?0:parseInt(r);i>0&&t.removeClass("pagelink-highlight").addClass("pagelink-highlight");t[0].scrollIntoView({block:"center",inline:"nearest"});i!==""&&window.setTimeout(function(){t.removeClass("pagelink-highlight")},i)}let e=jQuery.extend({},n);return this.each(function(){let n=jQuery(this);if(n[0].hasAttribute("data-page-links-rootselector")){let t=n.attr("data-page-links-rootselector"),i=n.attr("data-page-links-includeheaders"),r=n.attr("data-page-links-heading-class");n.removeAttr("data-page-links-rootselector");n.removeAttr("data-page-links-includeheaders");n.removeAttr("data-page-links-heading-class");t&&t.length!==0||(t="body");n.append(u(jQuery(t),i,r))}})}})(jQuery);