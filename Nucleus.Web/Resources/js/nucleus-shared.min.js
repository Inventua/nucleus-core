/*! nucleus-shared | Nucleus shared client-side handlers and behaviours | (c) Inventua Pty Ptd.  www.nucleus-cms.com */
function _Page(){function l(n){if(jQuery(this).attr("data-autopostbackevent")===n.type){n.preventDefault();n.stopImmediatePropagation();var t=jQuery.Event("submit",{originalEvent:n});jQuery(this).parents("form").first().trigger(t)}}function s(n){var t=n===document?"document":jQuery(n).attr("data-track-scroll");return"scrolltop:"+document.location.pathname+":"+t}function h(){try{return typeof sessionStorage!="undefined"}catch(n){return!1}}function a(){if(h()&&window.self===window.top)jQuery(window).on("beforeunload",function(){jQuery("document, [data-track-scroll]").each(function(n,t){try{sessionStorage.setItem(s(t),jQuery(t).scrollTop().toString())}catch(i){}})})}function v(){h()&&window.self===window.top&&jQuery("document, [data-track-scroll]").each(function(n,t){var i=s(t);try{sessionStorage[i]&&jQuery(t).scrollTop(sessionStorage.getItem(i))}catch(r){}})}function y(n){var t,i,u,r;n.preventDefault();n.stopImmediatePropagation();n.currentTarget.tagName.toLowerCase()==="a"?(form=jQuery(n.currentTarget).parents("form"),jQuery(n.currentTarget).attr("href")!==undefined&&(t=jQuery(n.currentTarget).attr("href")),jQuery(n.currentTarget).attr("data-href")!==undefined&&(t=jQuery(n.currentTarget).attr("data-href")),i=jQuery(n.currentTarget).attr("data-frametarget")):n.currentTarget.tagName.toLowerCase()==="button"&&(form=jQuery(n.currentTarget).parents("form"),t=jQuery(n.currentTarget).attr("formaction"),i=jQuery(n.currentTarget).attr("data-frametarget"));typeof n.originalEvent!="undefined"&&typeof n.originalEvent.submitter!="undefined"&&(r=jQuery(n.originalEvent.submitter).attr("data-frametarget"),typeof r!="undefined"&&r!==""&&(i=r));u=jQuery(i);u.length!==0&&u.attr("src",t)}function i(n,t){var i=t;return i==="window"?jQuery(window):i==="document"?jQuery(document):(i.endsWith(".parent()")&&(t=t.substring(0,t.lastIndexOf(".parent()"))),n!==null&&n.length>0&&(target=n.find(t).first(),(target===null||target.length===0)&&(target=n.closest(t).first())),(target===null||target.length===0)&&(target=jQuery(t).first()),i.endsWith(".parent()")&&(target=target.parent()),target.is(".modal")&&(target=target.find(".modal-body")),target)}function r(n){var t,r,u,s,h,c,l,a;(n.currentTarget.tagName.toLowerCase()==="form"?(t=jQuery(n.currentTarget),h=t,r=t.attr("action"),u=t.attr("data-target")):n.currentTarget.tagName.toLowerCase()==="a"&&(t=jQuery(n.currentTarget).parents("form"),h=jQuery(n.currentTarget),r=jQuery(n.currentTarget).attr("href"),u=jQuery(n.currentTarget).attr("data-target"),typeof r=="undefined"&&(r=t.attr("action")),typeof u=="undefined"&&(u=t.attr("data-target"))),typeof n.originalEvent!="undefined"&&typeof n.originalEvent.submitter!="undefined"&&(c=jQuery(n.originalEvent.submitter).attr("formaction"),typeof c!="undefined"&&c!==""&&(r=c,h=jQuery(n.originalEvent.submitter)),l=jQuery(n.originalEvent.submitter).attr("data-target"),typeof l!="undefined"&&l!==""&&(u=l,h=jQuery(n.originalEvent.submitter))),s=i(h,u),s.find(".ValidationError").removeClass("ValidationError"),u!=="window")&&(n.preventDefault(),n.stopImmediatePropagation(),a=function(){f.call(this,n);jQuery.ajax({url:r,method:"POST",enctype:t.attr("enctype"),data:t.attr("enctype")==="multipart/form-data"?new FormData(t[0]):t.serialize(),headers:{Accept:"application/json, */*"},xhr:function(){var n=new window.XMLHttpRequest;return n.upload.addEventListener("progress",function(n){if(n.lengthComputable){var i=Math.round(n.loaded/n.total*100);t.trigger("progress",i)}},!1),n},processData:t.attr("enctype")==="multipart/form-data"?!1:!0,contentType:t.attr("enctype")==="multipart/form-data"?!1:"application/x-www-form-urlencoded; charset=UTF-8",success:function(i,u,f){o(s,h,i,r,n,u,f);t.trigger("success",[s,i,r,n,u,f])},error:function(i,u,f){e(s,r,n,u,f,i);t.trigger("error",[s,r,n,u,f,i])}})},typeof n.originalEvent!="undefined"&&typeof n.originalEvent.submitter!="undefined"&&typeof jQuery(n.originalEvent.submitter).attr("data-confirm")!="undefined"?w(jQuery(n.originalEvent.submitter).attr("data-confirm"),jQuery(n.originalEvent.submitter).attr("data-confirm-title"),function(){a.call(this)})||a.call(this):a.call(this))}function p(n,t,i){n!==null&&(n.preventDefault(),n.stopImmediatePropagation());typeof i=="string"&&(i=jQuery(i));f.call(this,n);jQuery.ajax({url:t,headers:{Accept:"application/json, */*"},success:function(r,u,f){o(i,null,r,t,n,u,f)},error:function(r,u,f){e(i,t,n,u,f,r)}})}function u(n){n.preventDefault();n.stopPropagation();var t,u,r;return jQuery(n.currentTarget).attr("data-target")!==undefined?(jQuery(n.currentTarget).attr("href")!==undefined&&(t=jQuery(n.currentTarget).attr("href")),jQuery(n.currentTarget).attr("data-href")!==undefined&&(t=jQuery(n.currentTarget).attr("data-href")),u=jQuery(n.currentTarget).attr("data-target"),r=i(jQuery(n.currentTarget),u)):jQuery(n.target).attr("data-target")!==undefined&&(jQuery(n.target).attr("href")!==undefined&&(t=jQuery(n.target).attr("href")),jQuery(n.target).attr("data-href")!==undefined&&(t=jQuery(n.target).attr("data-href")),u=jQuery(n.target).attr("data-target"),r=i(jQuery(n.target),u)),r.find(".ValidationError").removeClass("ValidationError"),typeof t=="undefined"&&(t=jQuery(n.currentTarget).find("[href]").attr("href")),typeof r!="undefined"&&typeof t!="undefined"&&(f.call(this,n),jQuery.ajax({url:t,headers:{Accept:"application/json, */*"},success:function(i,u,f){o(r,jQuery(n.currentTarget),i,t,n,u,f)},error:function(i,u,f){e(r,t,n,u,f,i)}})),!1}function f(n){var t=jQuery(this);n!==null&&n.originalEvent!==null&&typeof n.originalEvent!="undefined"&&(n.originalEvent.submitter!==null&&typeof n.originalEvent.submitter!="undefined"?t=jQuery(n.originalEvent.submitter):n.originalEvent.target!==null&&typeof n.originalEvent.target!="undefined"&&(t=jQuery(n.originalEvent.target)));t==null||t.hasClass("nucleus-show-progress")||(t=t.parents(".nucleus-show-progress").first());t!=null&&t.hasClass("nucleus-show-progress")&&window.setTimeout(()=>{var n=jQuery('<div class="spinner-border spinner-border-sm text-primary nucleus-progress-spinner ms-2" role="status"/>');t.hasClass("nucleus-show-progress-inside")?n.appendTo(t):t.hasClass("nucleus-show-progress-after")?n.insertAfter(t):t.hasClass("nucleus-show-progress-before")&&n.insertBefore(t)},500)}function w(n,i,r){return(typeof i=="undefined"||i==="")&&(i="Confirm"),t(i,n,"question","Ok","Cancel",r),!0}function e(n,i,r,u,f,e){var o,l,h,v,c,s,a,y;if(e.status===302){e.getResponseHeader("X-Location-Target")==="_top"?window.parent.document.dispatchEvent(new CustomEvent("Open",{detail:{target:e.getResponseHeader("X-Location")}})):window.location.assign(e.getResponseHeader("X-Location"));return}if(typeof e.responseJSON!="undefined")if(e.status===400)if(typeof e.responseJSON.title!="undefined"&&typeof e.responseJSON.detail!="undefined")o=e.responseJSON;else{l=new Array(e.responseJSON.length);h="";for(c in e.responseJSON)s=jQuery('[name="'+c+'"]'),s.is(".HtmlEditorControl")?s.parents(".settings-control").first().addClass("ValidationError"):s.addClass("ValidationError"),h!==""&&(h+=","),h+="#"+s.attr("id");v=jQuery(h);for(c in e.responseJSON)s=jQuery('[name="'+c+'"]'),a=b(v,s.attr("id")),a!==undefined&&(f=e.responseJSON[c].toString(),f.endsWith(".")||(f+="."),l[a]="<li>"+f+"<\/li>");y="<ul>"+l.join("")+"<\/ul>";o={};o.title="Validation Error";o.detail=y;o.statusCode=e.status;o.icon="warning"}else o=e.responseJSON;else e.status===403&&(o={},o.title="Access Denied",o.detail=e.responseText===null||e.responseText===""?"Your account does not have permission to access this function.":e.responseText,o.statusCode=e.status);(typeof o=="undefined"||o===null)&&(o={},o.title="Error ["+e.statusText+"]",o.detail=e.responseText,o.statusCode=e.status);t(o.title,o.detail,o.icon??"error")}function b(n,t){for(count=0;count<n.length;count++)if(jQuery(n[count]).attr("id")===t)return count}function t(n,t,i,r,u,f){var e="nucleus-dialog",h,o,s,c,l,a;if(jQuery("#"+e).remove(),typeof r=="undefined"&&(r="Ok"),typeof u=="undefined"&&(u="Close"),h="",typeof f!="undefined"&&(h='<button type="button" class="btn btn-primary" data-bs-dismiss="modal">'+r+"<\/button>"),o="",s="",typeof i!="undefined")switch(i){case"question":s=" icon-question";o='<div class="dialog-icon"><span class="nucleus-material-icon">&#xe887;<\/span><\/div>';break;case"warning":s=" icon-warning";o='<div class="dialog-icon"><span class="nucleus-material-icon">&#xe002;<\/span><\/div>';break;case"error":s=" icon-error";o='<div class="dialog-icon"><span class="nucleus-material-icon">&#xe000;<\/span><\/div>'}if(Array.isArray(t)){for(c=new Array(t.length),index=0;index<t.length;index++)messageItem=t[index].toString(),messageItem.endsWith(".")||(messageItem+="."),c[index]="<li>"+messageItem+"<\/li>";t="<ul>"+c.join("")+"<\/ul>"}if(l=jQuery('<div class="modal fade'+s+'" id="'+e+'" tabindex="-1" aria-label="'+n+'">  <div class="modal-dialog modal-dialog-centered modal-lg">    <div class="modal-content">      <div class="modal-header">        <h5 class="modal-title">'+n+'<\/h5>        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="'+u+'"><\/button>      <\/div>      <div class="modal-body flex-row">'+o+'        <div class="dialog-message">'+t.replace(new RegExp("\n","g"),"<br/>")+'<\/div>      <\/div>      <div class="modal-footer">'+h+'        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">'+u+"<\/button>      <\/div>    <\/div>  <\/div ><\/div>"),jQuery("body").append(l),typeof f!="undefined")l.find(".btn-primary").on("click",f);jQuery("#"+e).on("hidden.bs.modal",function(){jQuery("#"+e).remove()});a=new bootstrap.Modal("#"+e);a.show()}function o(n,i,r,u,f,e,o){if(k(n,i,r,e,o),typeof o.responseJSON!="undefined"&&typeof o.responseJSON.message!="undefined")t(o.responseJSON.title,o.responseJSON.message);else if(r.startsWith("<!DOCTYPE"))document.open(),document.write(r),document.close();else{var s=[];n.find("input[type=password]").each(function(n,t){var i=jQuery(t);s[n]={name:i.prop("name"),value:i.val()}});n.empty().html(r).attr("data-src",u);jQuery(s).each(function(t){n.find('input[type=password][name="'+s[t].name+'"]').val(s[t].value)});s=null}d(n,i,r,e,o);jQuery(Page).trigger("ready",[{page:Page,target:n,data:r,url:u,event:f,status:e,request:o}]);it(n,r,e,o)}function k(t,i){this._selectedTab=t.find(".nav .nav-item .active").parent().index()+1;i!==null&&i.parents(".modal").length!==0&&i.parents(".modal").first().find(t).length===0&&(n(i.parents(".modal").first(),!1),i.parents(".modal").first().modal("hide"))}function d(t,i,r){var u,e,s,o,f;if(t.is(":visible")||r===""||t.show(),!t.is(".modal, .modal-body")&&r!==""&&jQuery(".modal").is(":visible")&&i!==null&&i.parents(".modal").length!==0&&i.parents(".modal").first().find(t).length===0&&jQuery(".modal:visible").first().modal("hide"),t.parents(".modal").length!==0)if(u=t.parents(".modal"),r!==""){e=jQuery(".nucleus-modal-caption").first();e.length!==0&&(s=u.find(".modal-title"),s.html(e.html()),e.remove());jQuery(t).find("form, button, input").each(function(n,t){t=jQuery(t);t.tagName!=="form"&&(form=t.parents("form"));(typeof t.attr("data-target")=="undefined"||t.attr("data-target")==="")&&typeof form!="undefined"&&(typeof form.attr("data-target")=="undefined"||form.attr("data-target")==="")&&t.attr("data-target",".modal-body")});o=new bootstrap.Modal(u,{backdrop:"static"});o.show();u.off("shown.bs.modal");u.on("shown.bs.modal",function(){g()});u.off("hide.bs.modal");u.on("hide.bs.modal",function(){nt(this)})}else n(o,!1),u.modal("hide");if(self===top&&r===""&&t.length===0){window.location.reload(!0);return}if(self!==top&&r===""&&(jQuery(frameElement).attr("id")!=="AdminFrame"||i.hasClass("nucleus-dialogresult"))){jQuery(frameElement).hide();window.parent.document.dispatchEvent(new CustomEvent("Refresh"));return}jQuery("select option").each(function(){jQuery(this).text()=="-"&&window.setTimeout(function(n){var r=n.parent(),t=jQuery("<span>-<\/span>"),i;t.css("font-size",n.parent().css("font-size"));r.parent().append(t);i=Math.floor(r.width()/t.width());t.remove();Number.isInteger(dashcount)||(i=10);n.text("-".repeat(i));n.attr("disabled","disabled")},100,jQuery(this))});jQuery(document.activeElement).is("input[type=search]")||(f=t.find('.nucleus-default-control, input:not([type="hidden"]), select, textarea').first(),f.length===0&&(f=t.find('button, a, [tabindex]:not([tabindex="-1"])').first()),f.length>0&&tt(f.first())&&f.first().focus())}function g(){jQuery.uniqueSort(jQuery(".modal-backdrop").parent()).each(function(n,t){jQuery(t).find(".modal-backdrop:not(:last)").remove()})}function nt(n){jQuery(n).siblings(".modal-backdrop").remove();jQuery(n).parents(".nucleus-adminpage").first().siblings(".modal-backdrop").remove()}function tt(n){var t=n.offset().top,r=t+n.outerHeight(),i=jQuery(window).scrollTop(),u=i+jQuery(window).height();return r>i&&t<u}function it(n){typeof this._selectedTab!="undefined"&&this._selectedTab!==-1&&n.find(".nav .nav-item:nth-child("+this._selectedTab+") button").trigger("click")}function rt(n){function i(n){return n.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")}var t=document.cookie.match(RegExp("(?:^|;\\s*)"+i(n)+"=([^;]*)"));return t?t[1]:null}function ut(n,t){jQuery(n).each(function(n,i){var r=jQuery('<button class="nucleus-copy-button nucleus-material-icon btn btn-none d-block ms-auto mb-1 fs-small" type="button" title="Copy to Clipboard">&#xe14d;<\/button>');r[0].CopyTarget=typeof t!="undefined"?jQuery(i).find(t).length>0?jQuery(i).find(t):jQuery(i).closest(t):jQuery(i);r.on("click",function(){return c(this.CopyTarget),!1});r.insertBefore(jQuery(i))})}function c(n){if(jQuery(n).length!==0){var t=jQuery("<textarea>");jQuery("body").append(t);jQuery(n).is("input, textarea")?t.val(jQuery(n).val()).select():t.val(jQuery(n)[0].innerText.replace(/[^\x20-\x7E\x0A\x0D]/g,"")).select();document.execCommand("copy");t.remove()}}function n(n,t){var i;i=jQuery(n).hasClass(".modal-dialog")?jQuery(n):jQuery(n).parents(".modal-dialog").first();t?i.removeClass("modal-auto-size").addClass("modal-full-size"):i.removeClass("modal-full-size").addClass("modal-auto-size")}function ft(n){jQuery(".settings-control[title]").each(function(t,i){var r,u;if(n){r=jQuery(i).find("label span");jQuery(i).attr("data-bs-original-title",jQuery(i).attr("title")).removeAttr("title","");r.attr("data-bs-toggle","tooltip");u=new bootstrap.Tooltip(r,{trigger:"hover",placement:"bottom",container:i,title:function(){return jQuery(this).parents(".settings-control").first().attr("data-bs-original-title")},delay:600});r.removeAttr("data-bs-original-title").removeAttr("title","");i.addEventListener("shown.bs.tooltip",function(){var t,n;jQuery(this).hasClass("settings-control")&&jQuery(this).css("position")=="relative"&&(t=jQuery(this).find(".tooltip").css("transform"),t.includes("matrix")&&(n=t.split(","),t=n[0]+","+n[1]+","+n[2]+","+n[3]+",0,"+n[5],jQuery(this).find(".tooltip").css("transform",t)),jQuery(this).find(".tooltip-arrow").css("transform","translateX(10px)"))});jQuery(document).on("click keydown",function(){jQuery('.settings-control label span[data-bs-toggle="tooltip"]').each(function(n,t){var i=bootstrap.Tooltip.getInstance(t);i!=null&&i.hide()})})}else jQuery(i).attr("title",jQuery(i).attr("data-bs-original-title")),jQuery(i).find("label span").removeAttr("data-bs-toggle","tooltip"),bootstrap.Tooltip.getInstance(jQuery(i).find('label span[data-bs-toggle="tooltip"]')).disable()})}function et(n){window.document.addEventListener("ExpandAdminFrame",function(n){var t=jQuery("#AdminFrame");n.detail!==null&&n.detail.expand?t.addClass("Expanded"):t.removeClass("Expanded")},!1);window.document.addEventListener("Refresh",function(t){if(t.detail!==null&&typeof t.detail.setEditMode!="undefined"){var i=t.detail.setEditMode?"true":"",r=t.detail.setEditMode?"3600":"0";document.cookie=n+"="+i+"; Path=/; max-age="+r}jQuery("body").fadeTo("opacity","0.3");window.location.reload()},!1);window.document.addEventListener("Open",function(n){n.detail!==null&&typeof n.detail.target!="undefined"&&(jQuery("body").fadeTo("opacity","0.3"),window.location=n.detail.target)},!1);window.document.addEventListener("InitFrame",function(n){var i,t,r,u;if(n.detail!==null&&typeof n.detail.element!="undefined"){if(i=jQuery(n.detail.element),!i.is("iframe"))return;if(t=i.parents(".modal"),r=t.find(".modal-title"),r.html(n.detail.element.title),!t.is(":visible")){u=new bootstrap.Modal(t,{backdrop:"static"});t.on("hidden.bs.modal",function(){jQuery("body").fadeTo("opacity","0.3");window.location.reload(!0)});u.show()}i.show()}},!1)}this.PostPartialContent=r;this.GetPartialContent=u;this.LoadPartialContent=p;this.GetCookie=rt;this.AddEventHandlers=et;this.AttachCopyButton=ut;this.CopyToClipboard=c;this.Dialog=t;this.EnableEnhancedToolTips=ft;jQuery(document).ready(function(){var t=(new Date).getTimezoneOffset()*-1;document.cookie="timezone-offset="+t.toString()+"; path=/;SameSite=Strict;max-age=3600";v();a();jQuery("a[data-target][href], a[data-frametarget][href]").each(function(n,t){jQuery(t).attr("data-href",jQuery(t).attr("href"));jQuery(t).attr("href","#0;")});jQuery(document).on("click",'[data-target]:not(form, input, button):not([data-method="POST"])',u);jQuery(document).on("click",'button[type="button"][data-target][data-href]',u);jQuery(document).on("submit",'form[data-target], form:has(input[type="submit"][data-target], input[type="file"][data-target], button[type="submit"][data-target])',r);jQuery(document).on("click","a[data-frametarget], button[data-frametarget]",y);jQuery(document).on("click",'a[data-method="POST"]',r);jQuery(document).on("click change keydown keyup input","INPUT[data-autopostbackevent], SELECT[data-autopostbackevent]",l);jQuery(document).on("keydown","input",function(n){var t,i,r,u;if(n.key==="Enter"&&(t=jQuery(this).parents("form"),t.length!==0)){if(i=t.find(".nucleus-default-button"),i.length===1){i.click();n.preventDefault();return}if(r=t.find(".btn-primary"),r.length===1){r.click();n.preventDefault();return}if(u=t.find('input[type="submit"]'),u.length===1){u.click();n.preventDefault();return}}});jQuery(document).on("dblclick",".modal-dialog .modal-header",function(){n(this,!jQuery(this).parents(".modal-dialog").first().hasClass("modal-full-size"))});jQuery(document).on("click",".modal-dialog .modal-header .btn-maximize",function(){n(this,!0)});jQuery(document).on("click",".modal-dialog .modal-header .btn-normalsize, .modal-dialog .modal-header .btn-close",function(){n(this,!1)});jQuery('.nucleus-menu [data-bs-toggle="dropdown-keyboardonly"]').on("keydown",function(n){var t,i;[37,38,39,40].includes(n.which)&&(t=jQuery(this).siblings('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)'),t.length>0&&(i=bootstrap.Dropdown.getOrCreateInstance(t),n.key=[37,38].includes(n.which)?"ArrowUp":"ArrowDown",event.stopPropagation(),i.show(),i._selectMenuItem(n)))});jQuery(".nucleus-menu .dropdown-menu").on("keydown",function(n){var t,i;[37,39].includes(n.which)&&(t=jQuery(this).siblings('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)'),t.length>0&&(i=bootstrap.Dropdown.getOrCreateInstance(t),n.Key=n.which===37?"ArrowUp":"ArrowDown",event.stopPropagation(),i.show(),i._selectMenuItem(n)))});jQuery(".dropdown-submenu .dropdown-toggle").on("click",function(){var n=jQuery(this).next(".dropdown-menu");jQuery(this).next().hasClass("show")||jQuery(".dropdown-menu").not(n.parents()).removeClass("show");n.on("shown.bs.collapse",function(){n.css("margin-left","");var t=jQuery(window).width()-(n.offset().left+n.outerWidth(!0));t<0&&n.css("margin-left",t)});return n.collapse("show"),!1});jQuery(document).on("click","",function(){jQuery(".dropdown-submenu .dropdown-menu").removeClass("show")});jQuery(document).on("change","input[type=file]",function(){event.preventDefault();event.stopImmediatePropagation();var t=jQuery(this).parents("form"),n=t.find(".UploadProgress").first(),i=n.find("progress"),r=n.find("label");n.siblings().css("opacity",".4");n.siblings(".alert").hide();n.show();t.on("progress",function(n,t){i.attr("value",t.toString());i.text(t.toString()+"%");var f=0,u="file";jQuery(n.currentTarget).find("input[type=file]").each(function(n,t){t!=null&&typeof t.files!="undefined"&&(f+=t.files.length)});f>1&&(u="files");t<100?r.text("Uploading "+u+" ..."):r.text("Upload Complete.  Processing "+u+" ...")});t.on("error",function(){n.hide();n.siblings().css("opacity","1")});t.attr("action",jQuery(this).attr("formaction"));t.submit()});jQuery("body").on("click",function(){jQuery(".PopupMenu").fadeOut()});jQuery(".nucleus-default-control").focus();jQuery(Page).trigger("ready",[{page:Page}])})}var Page=new _Page;