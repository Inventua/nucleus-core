/*! nucleus-admin | Nucleus Admin UI client-side handlers and behaviours | (c) Inventua Pty Ptd.  www.nucleus-cms.com */
function _handleContentLoaded(n,t){function e(n){var i=jQuery(n.currentTarget).find("[data-href]"),t=i.attr("data-href");if(jQuery(".nucleus-adminpage").data("src")===t&&navstack[navstack.length-1]===t)return u(!1,""),!1;u(!0,t);Page.LoadPartialContent(n,t,jQuery(".nucleus-adminpage"));n.preventDefault();n.stopImmediatePropagation()}function u(n,t){window.parent.document.dispatchEvent(new CustomEvent("ExpandAdminFrame",{detail:{expand:n}}));jQuery(".nucleus-adminpage").data("src",t);n?jQuery(".nucleus-control-panel-content").addClass("show").attr("aria-expanded","true"):(jQuery(".nucleus-control-panel-content").removeClass("show").attr("aria-expanded","false"),f())}function o(){return f(!Page.GetCookie("nucleus_editmode")),!1}function f(n){window.parent.document.dispatchEvent(new CustomEvent("Refresh",{detail:{setEditMode:n}}))}var i,r;(t.target===null||typeof t.target=="undefined")&&(t.target=jQuery(document));t.data===""&&t.target.parents(".nucleus-control-panel-content").length!==0&&(window.parent.document.dispatchEvent(new CustomEvent("ExpandAdminFrame",{detail:{expand:!1}})),jQuery(".nucleus-control-panel-content").removeClass("show"));jQuery(document).off("submit.admin");jQuery(document).on("submit.admin",'.ModuleEditor form, .ModuleEditor form input[type="submit"], .ModuleEditor form button[type="submit"]',t.page.PostPartialContent);t.target.is(".nucleus-editor-panel")&&jQuery(".nucleus-search-results-wrapper").hide();i=t.target.find("form");i.length!==0&&(typeof i.attr("data-target")=="undefined"||i.attr("data-target")==="")&&i.attr("data-target","form.parent()");r=jQuery(".nucleus-control-panel-heading").first();r.length!==0&&(jQuery("#nucleus-control-panel-heading").html(r.html()),jQuery("#nucleus-control-panel-heading").show(),r.remove());jQuery(".nucleus-control-panel .nucleus-control-panel-sidebar LI:not(#nucleus-edit-content-btn)").off("click.sidebar");jQuery(".nucleus-control-panel .nucleus-control-panel-sidebar LI:not(#nucleus-edit-content-btn)").on("click.sidebar",e);jQuery(".nucleus-btn-close-frame").off("click.closeframe");jQuery(".nucleus-btn-close-frame").on("click.closeframe",function(){return u(!1,""),!1});jQuery("#nucleus-edit-content-btn").off("click.toggleMode");jQuery("#nucleus-edit-content-btn").on("click.toggleMode",o);jQuery(".nucleus-control-panel-sidebar .dock-top-btn, .nucleus-control-panel-sidebar .dock-left-btn").off("click.toggleDocking");jQuery(".nucleus-control-panel-sidebar .dock-top-btn, .nucleus-control-panel-sidebar .dock-left-btn").on("click.toggleDocking",function(){jQuery("body").toggleClass("control-panel-dock-top");window.parent.document.dispatchEvent(new CustomEvent("ToggleControlPanelDocking"))});jQuery(".nucleus-btn-page-back").off("click.managenav");jQuery(".nucleus-btn-page-back").on("click.managenav",function(){navstack.pop()});navstack.length!==0&&navstack[navstack.length-1]!==t.url?jQuery(".nucleus-btn-page-back").attr("href",navstack[navstack.length-1]).show():jQuery(".nucleus-btn-page-back").removeAttr("href").hide();typeof t.url!="undefined"&&navstack[navstack.length-1]!==t.url&&navstack.push(t.url);typeof t.event!="undefined"&&t.event!==null&&(jQuery(t.event.currentTarget).parents("ul, ol").find("LI.selected").removeClass("selected"),jQuery(t.event.currentTarget).is("li")?jQuery(t.event.currentTarget).addClass("selected"):jQuery(t.event.currentTarget).parent("li").addClass("selected"),t.event.currentTarget.scrollIntoView&&t.event.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}));t.target.find(".nucleus-btn-close-results").off("click.closeResults");t.target.find(".nucleus-btn-close-results").on("click.closeResults",function(){jQuery(this).parents(".nucleus-search-results").hide()});jQuery().HtmlEditor&&t.target.find(".HtmlEditorControl").HtmlEditor({isAdminMode:!0})}jQuery(Page).on("ready.admin",_handleContentLoaded);var navstack=[];