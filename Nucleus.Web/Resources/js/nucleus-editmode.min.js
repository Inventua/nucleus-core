/*! nucleus-editmode | Nucleus inline editing client-side handlers and behaviours | (c) Inventua Pty Ptd.  www.nucleus-cms.com */
function _setupEditMode(){function i(t){var i=jQuery(t.target);i.addClass("dragging");jQuery(".nucleus-move-droptarget").each(function(n,r){var u=jQuery(r),e=i.parents(".nucleus-module-editing"),f=u.parents(".nucleus-module-editing");f.is(jQuery(t.target).parents(".nucleus-module-editing"))||f.length===0&&u.parent().is(e.parent())&&u.is(":last-child")||u.addClass("show")});t.originalEvent.dataTransfer.effectAllowed="move";n=jQuery(t.target).attr("data-mid")}function r(t){var i=jQuery(t.target).attr("data-mid");n!==null&&n!==i?(jQuery(t.target).addClass("drag-active"),t.originalEvent.dataTransfer.dropEffect="move"):t.originalEvent.dataTransfer.dropEffect="none"}function u(t){var i=jQuery(t.target).attr("data-mid");n!==null&&n!==i&&t.preventDefault()}function f(n){jQuery(n.target).removeClass("drag-active")}function e(t){jQuery(t.target).removeClass("dragging");jQuery(".nucleus-move-droptarget").removeClass("show");n=null}function o(t){var r=jQuery(t.target).attr("data-pane-name"),u=jQuery(t.target).attr("data-mid"),f,i;r!==null&&n!==null&&(f=document.baseURI+"admin/pages/movemoduleto?mid="+n,i=new FormData,i.append("pane",r),typeof u!="undefined"&&i.append("beforeModuleId",u),jQuery.ajax({url:f,"async":!0,method:"POST",enctype:"multipart/form-data",data:i,headers:{Accept:"application/json, */*"},contentType:!1,processData:!1,success:function(){window.location.reload(!0)},error:function(){}}))}function s(){t>0&&window.clearTimeout(t);t=window.setTimeout(h,1e3,this)}function h(n){var i=jQuery(n).attr("data-inline-edit-route"),t=new FormData;t.append("value",jQuery(n).html());jQuery.ajax({url:i,"async":!0,method:"POST",enctype:"multipart/form-data",data:t,headers:{Accept:"application/json, */*"},contentType:!1,processData:!1,success:function(){},error:function(){}})}var n=null,t;jQuery(".nucleus-module-editing *[data-inline-edit-route]").prop("contenteditable","true").on("input blur",s);jQuery(".nucleus-move-dragsource").on("dragstart",i).on("dragend",e);jQuery(".nucleus-move-droptarget").on("dragenter",r).on("dragover",u).on("dragleave",f).on("drop",o);jQuery(".nucleus-move-droptarget").each(function(n,t){var i=jQuery(t);(i.parent().prev().length!==0&&i.parent().prev().position().top===i.parent().position().top||i.parent().next().length!==0&&i.parent().next().position().top===i.parent().position().top||i.prev().length!==0&&i.prev().position().top===i.position().top||i.next().length!==0&&i.next().position().top===i.position().top)&&i.addClass("sideways")});t=-1}jQuery(Page).on("ready.admin",_setupEditMode);