/*! Plug-in that creates a list of suggestions and search results based on query.  Part of the Nucleus CMS Search module.  (c) Inventua Pty Ptd.  www.nucleus-cms.com */
(function(){jQuery.fn.SearchResults=function(n){function f(){jQuery(document).on("click","",function(){jQuery(t+".suggestions-result").removeClass("show")});jQuery(t+".search-term").on("input",function(){return i!==-1&&window.clearTimeout(i),i=window.setTimeout(function(n){n.submit()},500,jQuery(this).parents("form").first()),!1})}function e(n,i){if(typeof i.target!="undefined"&&i.target.hasClass("search-suggestions")){i.target.css(t+"margin-left","");let n=jQuery(window).width()-(i.target.offset().left+i.target.outerWidth(!0));n<0&&i.target.css(t+"margin-left",n);i.target.collapse("show");i.target.find(t+".suggestions-result li").on("click",function(){let n=jQuery(this).parents("form").first().find(t+".search-term");n.val(jQuery(this).attr("title"));u(this)})}}function u(n){i!==-1&&window.clearTimeout(i);let r=jQuery(n).parents("form").first();return typeof r.attr("data-resultsurl")!="undefined"&&r.attr("data-resultsurl")!==""?(window.location=r.attr("data-resultsurl")+"?search="+r.find(t+".search-term").val(),!1):!0}let r=jQuery.extend({moduleId:""},n),i=-1,t="";return this.each(function(){t="._"+r.moduleId+" ";jQuery(r.searchTermSelector).on("keydown",function(n){if(n.keyCode===13)return u(this)});jQuery(t+".search-suggestions").length!==0&&f();jQuery(Page).on("ready",function(n,t){e(n,t)})})}})(jQuery);